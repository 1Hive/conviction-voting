# Do not edit subgraph.yaml,this is a generated file.
# Instead, edit subgraph.template.yaml and run `yarn manifest-<network>-[staging]`
specVersion: 0.0.2
description: A template for Aragon subgraphs
repository: https://github.com/aragon/connect
schema:
  file: ./schema.graphql
dataSources:
# Organizations
  # Kernel
  - kind: ethereum/contract
    name: Gardens
    network: rinkeby
    source:
      abi: Kernel
      address: '0x8494952a4b27ba5ceb70da756af1179e16c27604'
      startBlock: 6294595
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: ConvictionVoting
          file: ./abis/ConvictionVoting.json
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: NewAppProxy(address,bool,bytes32)
          handler: handleNewAppProxy
      file: ./src/aragon/mappings/Kernel.ts
# /Organizations
# Organization factories
  # DAOFactory
  - kind: ethereum/contract
    name: DAOFactory@0.8.1
    network: rinkeby
    source:
      abi: DAOFactory
      address: '0x7378ad1ba8f3c8e64bbb2a04473edd35846360f1'
      startBlock: 9428558
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: DeployDAO(address)
          handler: handleDeployDAO
      file: ./src/aragon/mappings/DAOFactory.ts
  # DAOFactory
  - kind: ethereum/contract
    name: DAOFactory@0.8
    network: rinkeby
    source:
      abi: DAOFactory
      address: '0xb9da44c051c6cc9e04b7e0f95e95d69c6a6d8031'
      startBlock: 8490795
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: DeployDAO(address)
          handler: handleDeployDAO
      file: ./src/aragon/mappings/DAOFactory.ts
  # DAOFactory
  - kind: ethereum/contract
    name: DAOFactory@0.7
    network: rinkeby
    source:
      abi: DAOFactory
      address: '0xc29f0599df12eb4cbe1a34354c4bac6d944071d1'
      startBlock: 7581829
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: DeployDAO(address)
          handler: handleDeployDAO
      file: ./src/aragon/mappings/DAOFactory.ts
  # DAOFactory
  - kind: ethereum/contract
    name: DAOFactory@0.6
    network: rinkeby
    source:
      abi: DAOFactory
      address: '0x595b34c93aa2c2ba0a38daeede629a0dfbdcc559'
      startBlock: 6592805
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: DeployDAO(address)
          handler: handleDeployDAO
      file: ./src/aragon/mappings/DAOFactory.ts
# /Organization factories
# Organization templates
# /Organization templates
# Legacy organization templates
# /Legacy organization templates
# Token factories
# /Token factories
# Tokens
# /Tokens
templates:
  # Kernel
  - kind: ethereum/contract
    name: Kernel
    network: rinkeby
    source:
      abi: Kernel
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: ConvictionVoting
          file: ./abis/ConvictionVoting.json
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: NewAppProxy(address,bool,bytes32)
          handler: handleNewAppProxy
      file: ./src/aragon/mappings/Kernel.ts
  # MiniMeToken
  - kind: ethereum/contract
    name: MiniMeToken
    network: rinkeby
    source:
      abi: MiniMeToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: ClaimedTokens(indexed address,indexed address,uint256)
          handler: handleClaimedTokens
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: NewCloneToken(indexed address,uint256)
          handler: handleNewCloneToken
        - event: Approval(indexed address,indexed address,uint256)
          handler: handleApproval
      file: ./src/aragon/mappings/MiniMeToken.ts

  - kind: ethereum/contract
    name: ConvictionVoting
    network: rinkeby
    source:
      abi: ConvictionVoting
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Config
        - Proposal
        - Stake
        - StakeHistory
      abis:
        - name: ConvictionVoting
          file: ./abis/ConvictionVoting.json
        - name: MinieMeToken
          file: ./abis/MiniMeToken.json
      eventHandlers:
        - event: ProposalAdded(address,uint256,string,bytes,uint256,address)
          handler: handleProposalAdded
        - event: StakeAdded(address,uint256,uint256,uint256,uint256,uint256)
          handler: handleStakeAdded
        - event: StakeWithdrawn(address,uint256,uint256,uint256,uint256,uint256)
          handler: handleStakeWithdrawn
        - event: ProposalExecuted(uint256,uint256)
          handler: handleProposalExecuted
      file: ./src/ConvictionVoting.ts
